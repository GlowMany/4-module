{"version":3,"file":"http.js","sourceRoot":"","sources":["../../../src/jsonrpc/client/http.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;;AAEtC,+DAA2C;AAG3C,MAAM,OAAO,GAAG,IAAI,CAAC;AAErB,IAAI,EAAE,GAAG,CAAC,CAAC;AACX,MAAa,iBAAiB;IAE5B,YAAY,GAAW;QACrB,IAAI,CAAC,KAAK,GAAG,eAAK,CAAC,MAAM,CAAC;YACxB,OAAO,EAAE,GAAG;YACZ,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,IAAI,CAAgC,MAAc,EAAE,MAAc;QACtE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAc,EAAE,EAAE;YACjD,OAAO,EAAE,KAAK;YACd,EAAE,EAAE,EAAE,EAAE;YACR,MAAM;YACN,MAAM;SACP,CAAC,CAAC;QACH,IAAK,GAAG,CAAC,IAAsB,CAAC,KAAK,EAAE;YACrC,MAAO,GAAG,CAAC,IAAsB,CAAC,KAAK,CAAC;SACzC;QACD,OAAQ,GAAG,CAAC,IAA2B,CAAC,MAAM,CAAC;IACjD,CAAC;CACF;AArBD,8CAqBC","sourcesContent":["// Copyright 2020-2021 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport axios, {AxiosInstance} from 'axios';\nimport {Response, ResponseError, ResponseSuccess, ResponseSuccessType} from './types';\n\nconst TIMEOUT = 5000;\n\nlet id = 0;\nexport class HttpJsonRpcClient {\n  protected axios: AxiosInstance;\n  constructor(url: string) {\n    this.axios = axios.create({\n      baseURL: url,\n      timeout: TIMEOUT,\n    });\n  }\n\n  async send<T extends ResponseSuccessType>(method: string, params?: any[]): Promise<T> {\n    const res = await this.axios.post<Response<T>>('', {\n      jsonrpc: '2.0',\n      id: id++,\n      method,\n      params,\n    });\n    if ((res.data as ResponseError).error) {\n      throw (res.data as ResponseError).error;\n    }\n    return (res.data as ResponseSuccess<T>).result;\n  }\n}\n"]}